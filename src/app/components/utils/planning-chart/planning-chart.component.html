<div class="container">
  <h1>Planning Chart</h1>

  <div class="booking-chart-container">
    <table class="table table-bordered">
      <thead>
        <tr class="month-header-wrapper">
          <th class="room-names" rowspan="2">Room ID</th>
          <ng-container *ngFor="let month of months">
            <th [attr.colspan]="month.days.length" class="month-header">
              {{ month.month | date : "MMMM yyyy" }}
            </th>
          </ng-container>
        </tr>
        <tr>
          <ng-container class="scroll-container">
            <ng-container *ngFor="let month of months" class="month-container">
              <ng-container
                *ngFor="let day of month.days; let last = last"
                class="day-cell"
              >
                <th *ngIf="!last" class="date-cell">{{ day | date : "dd" }}</th>
                <th *ngIf="last" #scrollSentinelNext class="date-cell">
                  {{ day | date : "dd" }}
                </th>
              </ng-container>
            </ng-container>
          </ng-container>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let room of rooms">
          <td class="room-name">{{ room.roomId }}</td>
          <ng-container *ngFor="let month of months">
            <ng-container *ngFor="let day of month.days">
              <td
                class="booking-cell"
                [ngClass]="{
                  selected: isSelected(room.roomId, day),
                  marked: isMarked(room.roomId, day),
                  'half-start': isHalfStart(room.roomId, day),
                  'half-end': isHalfEnd(room.roomId, day),
                  'full-marked':
                    isMarked(room.roomId, day) &&
                    !isHalfStart(room.roomId, day) &&
                    !isHalfEnd(room.roomId, day)
                }"
                (mousedown)="onMouseDown(room.roomId, day, $event)"
                (mouseover)="onMouseOver(room.roomId, day, $event)"
                (mouseout)="onMouseOut()"
                (mouseup)="onMouseUp($event)"
              ></td>
              
            </ng-container>
          </ng-container>
        </tr>
      </tbody>
    </table>
    <div
      #scrollSentinelPrev
      observeVisibility
      (visible)="loadPreviousMonth()"
    ></div>
  </div>
</div>
